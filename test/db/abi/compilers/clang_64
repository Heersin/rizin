NAME=ELF_ABI : Clang O0 load
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O0
CMDS=<<EOF
s
EOF
EXPECT=<<EOF
0x4011c0
EOF
RUN

NAME=ELF_ABI : Clang O0 arch/bits/size ground truth
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O0
CMDS=<<EOF
iI~arch,binsz,bits
EOF
EXPECT=<<EOF
arch     x86
binsz    115681
bits     64
machine  AMD x86-64 architecture
EOF
RUN

NAME=ELF_ABI : Clang O0 dwarf info
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O0
CMDS=<<EOF
id~?
EOF
EXPECT=<<EOF
22289
EOF
RUN

NAME=ELF_ABI : Clang O0 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O0
ARG=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   45 * imports
   47 * relocs
   41 * sections
   10 * segments
   69 * strings
  136 * symbols
   37 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang O1 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O1
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   95 * functions
   45 * imports
    0 * registers
   47 * relocs
   41 * sections
   10 * segments
   67 * strings
  143 * symbols
   37 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang O2 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O2
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   50 * functions
   44 * imports
    0 * registers
   46 * relocs
   42 * sections
   10 * segments
   60 * strings
  119 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang O3 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_O3
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   49 * functions
   44 * imports
    0 * registers
   46 * relocs
   42 * sections
   10 * segments
   60 * strings
  118 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang Of flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_Of
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   51 * functions
   44 * imports
    0 * registers
   46 * relocs
   41 * sections
   10 * segments
   60 * strings
  117 * symbols
   37 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang Os flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_Os
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   87 * functions
   45 * imports
    0 * registers
   47 * relocs
   41 * sections
   10 * segments
   69 * strings
  136 * symbols
   37 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang Os size
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_Os
CMDS=<<EOF
iI~binsz
EOF
EXPECT=<<EOF
binsz    115681
EOF
RUN
