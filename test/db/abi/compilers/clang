NAME=ELF_ABI : Clang m32 O0 load
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O0
CMDS=<<EOF
s
EOF
EXPECT=<<EOF
0x8048cd0
EOF
RUN

NAME=ELF_ABI : Clang m32 O0 arch/bits/size ground truth
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O0
CMDS=<<EOF
iI~arch,binsz,bits
EOF
EXPECT=<<EOF
arch     x86
binsz    126484
bits     32
EOF
RUN

NAME=ELF_ABI : Clang m32 O0 dwarf info
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O0
CMDS=<<EOF
id~?
EOF
EXPECT=<<EOF
22194
EOF
RUN

NAME=ELF_ABI : Clang m32 O0 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O0
ARG=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   45 * imports
   47 * relocs
   42 * sections
   10 * segments
   69 * strings
  139 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang m32 O1 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O1
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   95 * functions
   45 * imports
    0 * registers
   47 * relocs
   42 * sections
   10 * segments
   67 * strings
  146 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang m32 O2 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O2
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   50 * functions
   44 * imports
    0 * registers
   46 * relocs
   42 * sections
   10 * segments
   60 * strings
  119 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang m32 O3 flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_O3
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   49 * functions
   44 * imports
    0 * registers
   46 * relocs
   42 * sections
   10 * segments
   60 * strings
  118 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang m32 Of flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_Of
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   51 * functions
   44 * imports
    0 * registers
   46 * relocs
   42 * sections
   10 * segments
   60 * strings
  121 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang m32 Os flagspaces
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_Os
ARGS=-A
CMDS=<<EOF
fs
EOF
EXPECT=<<EOF
    0 * classes
   57 * functions
   45 * imports
    0 * registers
   47 * relocs
   42 * sections
   10 * segments
   67 * strings
  121 * symbols
   38 * symbols.sections
EOF
RUN

NAME=ELF_ABI : Clang m32 Os size
FILE=bins/abi_bins/elf/compilers/clang/echo_clang_m32_Os
CMDS=<<EOF
iI~binsz
EOF
EXPECT=<<EOF
binsz    127593
EOF
RUN
